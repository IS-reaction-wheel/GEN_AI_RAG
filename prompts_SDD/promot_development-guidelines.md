## 開発ガイドライン（development-guidelines.md）の作成指示

必ずディレクトリ内の `CLAUDE.md`、`README.md`、`docs/functional-design.md` (FD)、および `docs/architecture.md` を参照し、本プロジェクトの開発ガイドライン（`docs/development-guidelines.md`）を作成してください。

`CLAUDE.md` の規定に従い、以下の項目を網羅してドキュメントを構成してください。

### 1. コーディング規約とスタイル
Python プロジェクトとしての標準的なコーディング規約と、本プロジェクト特有の実装ルールを定義してください。
- **基本スタイル**: PEP 8 準拠、コードフォーマッター・リンターの利用（本プロジェクトの標準として Ruff の利用を想定）。
- **型ヒント (Type Hints)**: `typing` モジュールを使用した型ヒントの完全付与の義務化（静的解析を前提とする）。
- **データモデルの定義**: データの保持や LLM の構造化出力には `dataclass` ではなく Pydantic `BaseModel` を使用するルール（FD セクション 5.1 に基づく）。
- **エラーハンドリング**: LLM の出力異常やタイムアウトに対するフォールバック処理の実装ルール（FD セクション 11.5 に基づく）。

### 2. 命名規則
Clean Architecture や LangGraph を採用している本プロジェクト特有の命名規則を明記してください。
- **一般的な命名**: クラス名はパスカルケース（`PascalCase`）、メソッド・関数・変数はスネークケース（`snake_case`）、定数はアッパースネークケース（`UPPER_SNAKE_CASE`）。
- **アーキテクチャ固有の命名サフィックス**:
  - Domain 層のインターフェース: `[名前]Port` (例: `LLMPort`)
  - Interface Adapters 層の具象クラス: `[名前]Adapter` (例: `OllamaAdapter`)
  - Use Cases 層のエージェントノード関数: `[処理内容]_node` (例: `task_planning_node`)
  - ワークフローの状態定義: `[名前]State` (例: `WorkflowState`)

### 3. テスト規約
機能設計書の「テスト設計方針（FD セクション 12）」を実現するためのテスト作成ルールを定義してください。
- **テストフレームワーク**: `pytest` の使用。
- **ユニットテストの原則**: 外部依存（LLM、Chroma DB、spaCyモデル等）を切り離すため、DI（依存性の注入）を活用して Port のモック（Mock/Stub）を注入するルールの明文化。
- **純粋関数のテスト**: 前処理や文字列操作など、外部依存のない純粋関数（PDFテキストのクリーニング等）に対するテストの徹底。
- **バリデーションテスト**: Pydantic モデルの `@model_validator` による論理整合性補正ロジックのテスト要件。

### 4. バージョン管理（Git）とドキュメント更新規約
仕様駆動開発（SDD）を維持するためのルールを定義してください。
- **コミットメッセージ**: Conventional Commits 等に基づくプレフィックス（`feat:`, `fix:`, `docs:`, `test:`, `refactor:` 等）を利用した明確な命名。
- **ドキュメントとコードの同期**: コードの変更（特にアーキテクチャやデータモデルの変更）が発生した場合、`.steering/` でタスク管理を行い、必要に応じて `docs/` の設計ドキュメント（FD 等のダイアグラム含む）を**必ずコードと一緒に更新**するルール。

### 5. AI コーディング（Claude Code）運用ガイドライン
本プロジェクトを開発する AI アシスタント自身（および開発者）が守るべきコーディングプロセスを定義してください。
- **ステップバイステップの実装**: `.steering/` 配下の `tasklist.md` に基づき、一度に大量のファイルを変更・生成せず、1つのコンポーネント（または1つのテスト）ごとに着実に行うこと。
- **勝手な仕様変更・ライブラリ追加の禁止**: 実装中に行き詰まった場合でも、FD などの設計書で定められたアーキテクチャ（層の分離など）を勝手に崩さないこと。新たな外部パッケージが必要になった場合は、事前に提案し承認を得ること。

上記の条件を踏まえ、`docs/development-guidelines.md` の内容をMarkdown形式で出力してください。